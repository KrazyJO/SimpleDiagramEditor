!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";function r(t,e){if(t.ownerDocument!==e.ownerDocument)try{return e.ownerDocument.importNode(t,!0)}catch(t){}return t}function i(t,e){return e.appendChild(r(t,e)),t}function o(t,e){return i(e,t),t}n.r(e),n.d(e,"append",function(){return o}),n.d(e,"appendTo",function(){return i}),n.d(e,"attr",function(){return u}),n.d(e,"classes",function(){return d}),n.d(e,"clear",function(){return g}),n.d(e,"clone",function(){return m}),n.d(e,"create",function(){return x}),n.d(e,"innerSVG",function(){return R}),n.d(e,"remove",function(){return y}),n.d(e,"replace",function(){return G}),n.d(e,"transform",function(){return $}),n.d(e,"on",function(){return E}),n.d(e,"off",function(){return j}),n.d(e,"createPoint",function(){return O}),n.d(e,"createMatrix",function(){return k}),n.d(e,"createTransform",function(){return M}),n.d(e,"select",function(){return V}),n.d(e,"selectAll",function(){return T});var a=2,s={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":a,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":a,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function c(t,e,n){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=s[r];i?(i===a&&"number"==typeof n&&(n=String(n)+"px"),t.style[r]=n):t.setAttributeNS(null,e,n)}function u(t,e,n){if("string"==typeof e){if(void 0===n)return function(t,e){return s[e]?t.style[e]:t.getAttributeNS(null,e)}(t,e);c(t,e,n)}else!function(t,e){var n,r,i=Object.keys(e);for(n=0;r=i[n];n++)c(t,r,e[r])}(t,e);return t}function f(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}var h=/\s+/,l=Object.prototype.toString;function p(t){return void 0!==t}function d(t){return new v(t)}function v(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}function y(t){var e=t.parentNode;return e&&e.removeChild(t),t}function g(t){for(var e;e=t.firstChild;)y(e);return t}function m(t){return t.cloneNode(!0)}v.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~f(e,t)||e.push(t),p(this.el.className.baseVal)?this.el.className.baseVal=e.join(" "):this.el.className=e.join(" "),this},v.prototype.remove=function(t){if("[object RegExp]"===l.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=f(e,t);return~n&&e.splice(n,1),this.el.className.baseVal=e.join(" "),this},v.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},v.prototype.toggle=function(t,e){return this.list?(p(e)?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(p(e)?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},v.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(h);return""===t[0]&&t.shift(),t},v.prototype.has=v.prototype.contains=function(t){return this.list?this.list.contains(t):!!~f(this.array(),t)};var _={svg:"http://www.w3.org/2000/svg"},b='<svg xmlns="'+_.svg+'"';function w(t){return"<svg"===t.substring(0,4)?-1===t.indexOf(_.svg)&&(t=b+t.substring(4)):t=b+">"+t+"</svg>",function(t){var e;return(e=new DOMParser).async=!1,e.parseFromString(t,"text/xml")}(t)}function x(t,e){var n;return"<"===t.charAt(0)?(n=w(t).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(_.svg,t),e&&u(n,e),n}function E(t,e,n,r){t.addEventListener(e,n,r)}function j(t,e,n,r){t.removeEventListener(e,n,r)}var S=x("svg");function C(t,e){var n,r,i=Object.keys(e);for(n=0;r=i[n];n++)t[r]=e[r];return t}function O(t,e){var n=S.createSVGPoint();switch(arguments.length){case 0:return n;case 2:t={x:t,y:e}}return C(n,t)}function k(t,e,n,r,i,o){var a=S.createSVGMatrix();switch(arguments.length){case 0:return a;case 6:t={a:t,b:e,c:n,d:r,e:i,f:o}}return C(a,t)}function M(t){return t?S.createSVGTransformFromMatrix(t):S.createSVGTransform()}var N=/([&<>]{1})/g,A=/([\n\r"]{1})/g,P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function B(t,e){return t.replace(e,function(t,e){return P[e]||e})}function L(t,e){var n,r,i,o,a;switch(t.nodeType){case 3:e.push(B(t.textContent,N));break;case 1:if(e.push("<",t.tagName),t.hasAttributes())for(n=0,r=(i=t.attributes).length;n<r;++n)o=i.item(n),e.push(" ",o.name,'="',B(o.value,A),'"');if(t.hasChildNodes()){for(e.push(">"),n=0,r=(a=t.childNodes).length;n<r;++n)L(a.item(n),e);e.push("</",t.tagName,">")}else e.push("/>");break;case 8:e.push("\x3c!--",B(t.nodeValue,N),"--\x3e");break;case 4:e.push("<![CDATA[",t.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+t.nodeType)}return e}function R(t,e){if(void 0!==e){try{!function(t,e){var n,r=w(e).documentElement;if(g(t),e)for(n=r.firstChild;n;)i(n,t),n=n.nextSibling}(t,e)}catch(t){throw new Error("error parsing SVG: "+t.message)}return t}return function(t){for(var e=t.firstChild,n=[];e;)L(e,n),e=e.nextSibling;return n.join("")}(t)}function V(t,e){return t.querySelector(e)}function T(t,e){var n=t.querySelectorAll(e);return[].map.call(n,function(t){return t})}function G(t,e){return t.parentNode.replaceChild(r(e,t),t),e}function z(t,e){return e instanceof SVGMatrix?t.createSVGTransformFromMatrix(e):e}function $(t,e){var n=t.transform.baseVal;if(1===arguments.length)return n.consolidate();e.length?function(t,e){var n,r;for(t.clear(),n=0;r=e[n];n++)t.appendItem(z(t,r));t.consolidate()}(n,e):n.initialize(z(n,e))}},function(t,e,n){t.exports=n(5),t.exports.Collection=n(3)},function(t,e,n){"use strict";function r(t,e,n){return 2==arguments.length?t.getAttribute(e):null===n?t.removeAttribute(e):(t.setAttribute(e,n),t)}n.r(e),n.d(e,"attr",function(){return r}),n.d(e,"classes",function(){return c}),n.d(e,"clear",function(){return f}),n.d(e,"closest",function(){return v}),n.d(e,"delegate",function(){return w}),n.d(e,"domify",function(){return x}),n.d(e,"event",function(){return _}),n.d(e,"matches",function(){return O}),n.d(e,"query",function(){return k}),n.d(e,"queryAll",function(){return M}),n.d(e,"remove",function(){return N});var i=[].indexOf,o=function(t,e){if(i)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1},a=/\s+/,s=Object.prototype.toString;function c(t){return new u(t)}function u(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}function f(t){for(var e;t.childNodes.length;)e=t.childNodes[0],t.removeChild(e);return t}u.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~o(e,t)||e.push(t),this.el.className=e.join(" "),this},u.prototype.remove=function(t){if("[object RegExp]"==s.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=o(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},u.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},u.prototype.toggle=function(t,e){return this.list?(void 0!==e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(void 0!==e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},u.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(a);return""===t[0]&&t.shift(),t},u.prototype.has=u.prototype.contains=function(t){return this.list?this.list.contains(t):!!~o(this.array(),t)};var h,l=Element.prototype,p=l.matchesSelector||l.webkitMatchesSelector||l.mozMatchesSelector||l.msMatchesSelector||l.oMatchesSelector,d=function(t,e){if(p)return p.call(t,e);for(var n=t.parentNode.querySelectorAll(e),r=0;r<n.length;++r)if(n[r]==t)return!0;return!1},v=function(t,e,n){for(var r=n?t:t.parentNode;r&&r!==document;){if(d(r,e))return r;r=r.parentNode}},y=window.addEventListener?"addEventListener":"attachEvent",g=window.removeEventListener?"removeEventListener":"detachEvent",m="addEventListener"!==y?"on":"",_={bind:function(t,e,n,r){return t[y](m+e,n,r||!1),n},unbind:function(t,e,n,r){return t[g](m+e,n,r||!1),n}},b=["focus","blur"],w={bind:function(t,e,n,r,i){return-1!==b.indexOf(n)&&(i=!0),_.bind(t,n,function(n){var i=n.target||n.srcElement;n.delegateTarget=v(i,e,!0,t),n.delegateTarget&&r.call(t,n)},i)},unbind:function(t,e,n,r){-1!==b.indexOf(e)&&(r=!0),_.unbind(t,e,n,r)}},x=function(t,e){if("string"!=typeof t)throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var i=e.createElement("html");return i.innerHTML=t,i.removeChild(i.lastChild)}var o=j[r]||j._default,a=o[0],s=o[1],c=o[2];for((i=e.createElement("div")).innerHTML=s+t+c;a--;)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);for(var u=e.createDocumentFragment();i.firstChild;)u.appendChild(i.removeChild(i.firstChild));return u},E=!1;"undefined"!=typeof document&&((h=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',E=!h.getElementsByTagName("link").length,h=void 0);var j={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:E?[1,"X<div>","</div>"]:[0,"",""]};j.td=j.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],j.option=j.optgroup=[1,'<select multiple="multiple">',"</select>"],j.thead=j.tbody=j.colgroup=j.caption=j.tfoot=[1,"<table>","</table>"],j.polyline=j.ellipse=j.polygon=j.circle=j.text=j.line=j.path=j.rect=j.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var S="undefined"!=typeof Element?Element.prototype:{},C=S.matches||S.matchesSelector||S.webkitMatchesSelector||S.mozMatchesSelector||S.msMatchesSelector||S.oMatchesSelector,O=function(t,e){if(!t||1!==t.nodeType)return!1;if(C)return C.call(t,e);for(var n=t.parentNode.querySelectorAll(e),r=0;r<n.length;r++)if(n[r]==t)return!0;return!1};function k(t,e){return(e=e||document).querySelector(t)}function M(t,e){return(e=e||document).querySelectorAll(t)}function N(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,e,n){"use strict";t.exports.extend=function(t,e,n,r){var i=n.inverse;return Object.defineProperty(t,"remove",{value:function(t){var n=this.indexOf(t);return-1!==n&&(this.splice(n,1),e.unset(t,i,r)),t}}),Object.defineProperty(t,"contains",{value:function(t){return-1!==this.indexOf(t)}}),Object.defineProperty(t,"add",{value:function(t){this.contains(t)||(this.push(t),e.set(t,i,r))}}),Object.defineProperty(t,"__refs_collection",{value:!0}),t},t.exports.isExtended=function(t){return!0===t.__refs_collection}},function(t,e,n){"use strict";n.r(e);var r=1e3,i=function(){function t(t,e){var n=this;e=e||r,t.on(["render.shape","render.connection"],e,function(t,e){var r=t.type,i=e.element,o=e.gfx;if(n.canRender(i))return"render.shape"===r?n.drawShape(o,i):n.drawConnection(o,i)}),t.on(["render.getShapePath","render.getConnectionPath"],e,function(t,e){if(n.canRender(e))return"render.getShapePath"===t.type?n.getShapePath(e):n.getConnectionPath(e)})}return t.prototype.canRender=function(t){},t.prototype.drawShape=function(t,e){},t.prototype.drawConnection=function(t,e){},t.prototype.getShapePath=function(t){},t.prototype.getConnectionPath=function(t){},t}(),o=n(0),a=o.attr,s=o.create;function c(t){return t.join(",").replace(/,?([A-z]),?/g,"$1")}var u=n(6),f=n(0),h=f.append,l=f.attr,p=f.create,d=1,v=function(){function t(t,e){this.canRender=function(){return!0},this.drawShape=function(t,e){var n=p("rect");return l(n,{x:0,y:0,width:e.width||0,height:e.height||0}),l(n,this.SHAPE_STYLE),h(t,n),n},this.drawConnection=function(t,e){var n=function(t,e){var n=s("polyline");return a(n,{points:function(t){for(var e,n="",r=0;e=t[r];r++)n+=e.x+","+e.y+" ";return n}(t)}),e&&a(n,e),n}(e.waypoints,this.CONNECTION_STYLE);return h(t,n),n},this.getShapePath=function(t){var e=t.x,n=t.y,r=t.width;return c([["M",e,n],["l",r,0],["l",0,t.height],["l",-r,0],["z"]])},this.getConnectionPath=function(t){var e,n,r=t.waypoints,i=[];for(e=0;n=r[e];e++)n=n.original||n,i.push([0===e?"M":"L",n.x,n.y]);return c(i)},i.call(this,t,d),this.CONNECTION_STYLE=e.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=e.style({fill:"white",stroke:"fuchsia",strokeWidth:2})}return t.$inject=["eventBus","styles"],t}(),y=v;u(v,i);var g=Object.prototype.toString,m=Object.prototype.hasOwnProperty;function _(t){return"[object Array]"===g.call(t)}function b(t){return"[object Number]"===g.call(t)}function w(t){return"[object Function]"===g.call(t)}function x(t,e){return m.call(t,e)}function E(t,e){if(!function(t){return null===t||void 0===t}(t)){var n=_(t)?C:S;for(var r in t)if(x(t,r)&&!1===e(t[r],n(r)))return}}function j(t,e,n){return E(t,function(t,r){n=e(n,t,r)}),n}function S(t){return t}function C(t){return Number(t)}var O=Array.prototype.slice;function k(t,e){return t.bind(e)}var M=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function N(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return M.apply(void 0,[t].concat(n))}var A={__init__:["defaultRenderer"],defaultRenderer:["type",y],styles:["type",function(){var t={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},e=this;this.cls=function(t,e,n){return N(this.style(e,n),{class:t})},this.style=function(e,n){_(e)||n||(n=e,e=[]);var r=j(e,function(e,n){return N(e,t[n]||{})},{});return n?N(r,n):r},this.computeStyle=function(t,n,r){return _(n)||(r=n,n=[]),e.style(n||[],N({},r,t||{}))}}]},P=n(0),B=P.append,L=P.attr,R=P.classes,V=P.create,T=P.transform,G=P.createMatrix;function z(t,e){return Math.round(t*e)/e}function $(t){return b(t)?t+"px":t}function D(t,e,n){var r=V("g");R(r).add(e);var i=void 0!==n?n:t.childNodes.length-1;return t.insertBefore(r,t.childNodes[i]),r}var F={shape:["x","y","width","height"],connection:["waypoints"]};function q(t,e){var n="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttribute("transform",n)}var I,H=function(){function t(t,e,n,r){this._eventBus=e,this._elementRegistry=r,this._graphicsFactory=n,this._init(t||{})}return t.prototype._init=function(t){var e=this._eventBus,n=this._container=function(t){var e=(t=N({},{width:"100%",height:"100%"},t)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),N(n.style,{position:"relative",overflow:"hidden",width:$(t.width),height:$(t.height)}),e.appendChild(n),n}(t),r=this._svg=V("svg");L(r,{width:"100%",height:"100%"}),B(n,r);var i=this._viewport=D(r,"viewport");this._layers={},!1!==t.deferUpdate&&(this._viewboxChanged=function(t,e){var n;return function(){var r=O.call(arguments);n&&clearTimeout(n),n=setTimeout(function(){t.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(r))},e)}}(k(this._viewboxChanged,this),300)),e.on("diagram.init",function(){e.fire("canvas.init",{svg:r,viewport:i})},this),e.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],function(){delete this._cachedViewbox},this),e.on("diagram.destroy",500,this._destroy,this),e.on("diagram.clear",500,this._clear,this)},t.prototype._destroy=function(t){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},t.prototype._clear=function(){var t=this;this._elementRegistry.getAll().forEach(function(e){var n="waypoints"in e?"connection":"x"in e?"shape":"root";"root"===n?t.setRootElement(null,!0):t._removeElement(e,n)}),delete this._cachedViewbox},t.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},t.prototype.getLayer=function(t,e){if(!t)throw new Error("must specify a name");var n=this._layers[t];if(n||(n=this._layers[t]=this._createLayer(t,e)),void 0!==e&&n.index!==e)throw new Error("layer <"+t+"> already created at index <"+e+">");return n.group},t.prototype._createLayer=function(t,e){e||(e=0);var n=j(this._layers,function(t,n){return e>=n.index&&t++,t},0);return{group:D(this._viewport,"layer-"+t,n),index:e}},t.prototype.getContainer=function(){return this._container},t.prototype._updateMarker=function(t,e,n){var r;t.id||(t=this._elementRegistry.get(t)),(r=this._elementRegistry._elements[t.id])&&(E([r.gfx,r.secondaryGfx],function(t){t&&(n?R(t).add(e):R(t).remove(e))}),this._eventBus.fire("element.marker.update",{element:t,gfx:r.gfx,marker:e,add:!!n}))},t.prototype.addMarker=function(t,e){this._updateMarker(t,e,!0)},t.prototype.removeMarker=function(t,e){this._updateMarker(t,e,!1)},t.prototype.hasMarker=function(t,e){t.id||(t=this._elementRegistry.get(t));var n=this.getGraphics(t);return R(n).has(e)},t.prototype.toggleMarker=function(t,e){this.hasMarker(t,e)?this.removeMarker(t,e):this.addMarker(t,e)},t.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},t.prototype.setRootElement=function(t,e){t&&this._ensureValid("root",t);var n=this._rootElement,r=this._elementRegistry,i=this._eventBus;if(n){if(!e)throw new Error("rootElement already set, need to specify override");i.fire("root.remove",{element:n}),i.fire("root.removed",{element:n}),r.remove(n)}if(t){var o=this.getDefaultLayer();i.fire("root.add",{element:t}),r.add(t,o,this._svg),i.fire("root.added",{element:t,gfx:o})}return this._rootElement=t,t},t.prototype._ensureValid=function(t,e){if(!e.id)throw new Error("element must have an id");if(this._elementRegistry.get(e.id))throw new Error("element with id "+e.id+" already exists");var n=F[t];if(!function(t,e){return j(t,function(t,n,r){return t&&e(n,r)},!0)}(n,function(t){return void 0!==e[t]}))throw new Error("must supply { "+n.join(", ")+" } with "+t)},t.prototype._setParent=function(t,e,n){!function(t,e,n){if(t&&e){"number"!=typeof n&&(n=-1);var r=t.indexOf(e);if(-1!==r){if(r===n)return;if(-1===n)return;t.splice(r,1)}-1!==n?t.splice(n,0,e):t.push(e)}}(e.children,t,n),t.parent=e},t.prototype._addElement=function(t,e,n,r){n=n||this.getRootElement();var i=this._eventBus,o=this._graphicsFactory;this._ensureValid(t,e),i.fire(t+".add",{element:e,parent:n}),this._setParent(e,n,r);var a=o.create(t,e,r);return this._elementRegistry.add(e,a),o.update(t,e,a),i.fire(t+".added",{element:e,gfx:a}),e},t.prototype.addShape=function(t,e,n){return this._addElement("shape",t,e,n)},t.prototype.addConnection=function(t,e,n){return this._addElement("connection",t,e,n)},t.prototype._removeElement=function(t,e){var n=this._elementRegistry,r=this._graphicsFactory,i=this._eventBus;if(t=n.get(t.id||t))return i.fire(e+".remove",{element:t}),r.remove(t),function(t,e){if(!t||!e)return-1;var n=t.indexOf(e);-1!==n&&t.splice(n,1)}(t.parent&&t.parent.children,t),t.parent=null,i.fire(e+".removed",{element:t}),n.remove(t),t},t.prototype.removeShape=function(t){return this._removeElement(t,"shape")},t.prototype.removeConnection=function(t){return this._removeElement(t,"connection")},t.prototype.getGraphics=function(t,e){return this._elementRegistry.getGraphics(t,e)},t.prototype._changeViewbox=function(t){this._eventBus.fire("canvas.viewbox.changing"),t.apply(this),this._cachedViewbox=null,this._viewboxChanged()},t.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},t.prototype.viewbox=function(t){if(void 0===t&&this._cachedViewbox)return this._cachedViewbox;var e,n,r,i,o,a,s=this._viewport,c=this.getSize();return t?(this._changeViewbox(function(){i=Math.min(c.width/t.width,c.height/t.height);var e=this._svg.createSVGMatrix().scale(i).translate(-t.x,-t.y);T(s,e)}),t):(e=this.getDefaultLayer().getBBox(),n=(r=T(s))?r.matrix:G(),i=z(n.a,1e3),o=z(-n.e||0,1e3),a=z(-n.f||0,1e3),t=this._cachedViewbox={x:o?o/i:0,y:a?a/i:0,width:c.width/i,height:c.height/i,scale:i,inner:{width:e.width,height:e.height,x:e.x,y:e.y},outer:c})},t.prototype.scroll=function(t){var e=this._viewport,n=e.getCTM();return t&&this._changeViewbox(function(){t=N({dx:0,dy:0},t||{}),n=this._svg.createSVGMatrix().translate(t.dx,t.dy).multiply(n),q(e,n)}),{x:n.e,y:n.f}},t.prototype.zoom=function(t,e){return t?"fit-viewport"===t?this._fitViewport(e):(this._changeViewbox(function(){"object"!=typeof e&&(n=this.viewbox().outer,e={x:n.width/2,y:n.height/2}),r=this._setZoom(t,e)}.bind(this)),z(r.a,1e3)):this.viewbox(t).scale;var n,r},t.prototype._fitViewport=function(t){var e,n,r=this.viewbox(),i=r.outer,o=r.inner;return o.x>=0&&o.y>=0&&o.x+o.width<=i.width&&o.y+o.height<=i.height&&!t?n={x:0,y:0,width:Math.max(o.width+o.x,i.width),height:Math.max(o.height+o.y,i.height)}:(e=Math.min(1,i.width/o.width,i.height/o.height),n={x:o.x+(t?o.width/2-i.width/e/2:0),y:o.y+(t?o.height/2-i.height/e/2:0),width:i.width/e,height:i.height/e}),this.viewbox(n),this.viewbox().scale},t.prototype._setZoom=function(t,e){var n,r,i,o,a=this._svg,s=this._viewport,c=a.createSVGMatrix(),u=a.createSVGPoint(),f=(r=s.getCTM()).a;return e?(n=N(u,e).matrixTransform(r.inverse()),i=c.translate(n.x,n.y).scale(1/f*t).translate(-n.x,-n.y),o=r.multiply(i)):o=c.scale(t),q(this._viewport,o),o},t.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},t.prototype.getAbsoluteBBox=function(t){var e,n=this.viewbox();return{x:(e=t.waypoints?this.getGraphics(t).getBBox():t).x*n.scale-n.x*n.scale,y:e.y*n.scale-n.y*n.scale,width:e.width*n.scale,height:e.height*n.scale}},t.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")},t.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],t}(),Y="data-element-id",W=n(0).attr,Z=function(){function t(t){this._elements={},this._eventBus=t}return t.prototype.add=function(t,e,n){var r=t.id;this._validateId(r),W(e,Y,r),n&&W(n,Y,r),this._elements[r]={element:t,gfx:e,secondaryGfx:n}},t.prototype.remove=function(t){var e=this._elements,n=t.id||t,r=n&&e[n];r&&(W(r.gfx,Y,""),r.secondaryGfx&&W(r.secondaryGfx,Y,""),delete e[n])},t.prototype.updateId=function(t,e){this._validateId(e),"string"==typeof t&&(t=this.get(t)),this._eventBus.fire("element.updateId",{element:t,newId:e});var n=this.getGraphics(t),r=this.getGraphics(t,!0);this.remove(t),t.id=e,this.add(t,n,r)},t.prototype.get=function(t){var e;e="string"==typeof t?t:t&&W(t,Y);var n=this._elements[e];return n&&n.element},t.prototype.filter=function(t){var e=[];return this.forEach(function(n,r){t(n,r)&&e.push(n)}),e},t.prototype.getAll=function(){return this.filter(function(t){return t})},t.prototype.forEach=function(t){var e=this._elements;Object.keys(e).forEach(function(n){var r=e[n],i=r.element,o=r.gfx;return t(i,o)})},t.prototype.getGraphics=function(t,e){var n=t.id||t,r=this._elements[n];return r&&(e?r.secondaryGfx:r.gfx)},t.prototype._validateId=function(t){if(!t)throw new Error("element must have an id");if(this._elements[t])throw new Error("element with id "+t+" already added")},t.$inject=["eventBus"],t}(),U=n(1),X=n.n(U),J=(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}I(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),K=new X.a({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Q=new X.a({name:"label",enumerable:!0},{name:"labelTarget"}),tt=new X.a({name:"attachers",collection:!0},{name:"host"}),et=new X.a({name:"outgoing",collection:!0},{name:"source"}),nt=new X.a({name:"incoming",collection:!0},{name:"target"}),rt=function(){Object.defineProperty(this,"businessObject",{writable:!0}),K.bind(this,"parent"),Q.bind(this,"label"),et.bind(this,"outgoing"),nt.bind(this,"incoming")},it=function(t){function e(){var e=t.call(this)||this;return K.bind(e,"children"),tt.bind(e,"host"),tt.bind(e,"attachers"),e}return J(e,t),e}(rt),ot=function(t){function e(){return t.call(this)||this}return J(e,t),e}(it),at=function(t){function e(){var e=t.call(this)||this;return Q.bind(e,"labelTarget"),e}return J(e,t),e}(it),st={connection:function(t){function e(){var e=t.call(this)||this;return et.bind(e,"source"),nt.bind(e,"target"),e}return J(e,t),e}(rt),shape:it,label:at,root:ot},ct=function(){function t(){this._uid=12}return t.prototype.createRoot=function(t){return this.create("root",t)},t.prototype.createLabel=function(t){return this.create("label",t)},t.prototype.createShape=function(t){return this.create("shape",t)},t.prototype.createConnection=function(t){return this.create("connection",t)},t.prototype.create=function(t,e){return(e=N({},e||{})).id||(e.id=t+"_"+this._uid++),function(t,e){var n=st[t];if(!n)throw new Error("unknown type: <"+t+">");return N(new n,e)}(t,e)},t}(),ut=Array.prototype.slice,ft=function(){function t(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}return t.prototype.on=function(t,e,n,r){if(t=_(t)?t:[t],w(e)&&(r=n,n=e,e=1e3),!b(e))throw new Error("priority must be a number");var i=n;r&&((i=k(n,r)).__fn=n.__fn||n);var o=this,a={priority:e,callback:i};t.forEach(function(t){o._addListener(t,a)})},t.prototype.once=function(t,e,n,r){var i=this;if(w(e)&&(r=n,n=e,e=1e3),!b(e))throw new Error("priority must be a number");function o(){return i.off(t,o),n.apply(r,arguments)}o.__fn=n,this.on(t,e,o)},t.prototype.off=function(t,e){var n,r,i,o=this._getListeners(t);if(e)for(i=o.length-1;n=o[i];i--)(r=n.callback)!==e&&r.__fn!==e||o.splice(i,1);else o.length=0},t.prototype.createEvent=function(t){var e=new ht;return e.init(t),e},t.prototype.fire=function(t,e){var n,r,i,o;if(o=ut.call(arguments),"object"==typeof t&&(t=(n=t).type),!t)throw new Error("no event type specified");if(r=this._listeners[t]){n=e instanceof ht?e:this.createEvent(e),o[0]=n;var a=n.type;t!==a&&(n.type=t);try{i=this._invokeListeners(n,o,r)}finally{t!==a&&(n.type=a)}return void 0===i&&n.defaultPrevented&&(i=!1),i}},t.prototype.handleError=function(t){return!1===this.fire("error",{error:t})},t.prototype._destroy=function(){this._listeners={}},t.prototype._invokeListeners=function(t,e,n){var r,i,o;for(r=0;(i=n[r])&&!t.cancelBubble;r++)o=this._invokeListener(t,e,i);return o},t.prototype._invokeListener=function(t,e,n){var r;try{void 0!==(r=function(t,e){return t.apply(null,e)}(n.callback,e))&&(t.returnValue=r,t.stopPropagation()),!1===r&&t.preventDefault()}catch(t){if(!this.handleError(t))throw console.error("unhandled error in event listener"),console.error(t.stack),t}return r},t.prototype._addListener=function(t,e){var n,r,i=this._getListeners(t);for(r=0;n=i[r];r++)if(n.priority<e.priority)return void i.splice(r,0,e);i.push(e)},t.prototype._getListeners=function(t){var e=this._listeners[t];return e||(this._listeners[t]=e=[]),e},t}(),ht=function(){function t(){}return t.prototype.stopPropagation=function(){this.cancelBubble=!0},t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.init=function(t){N(this,t||{})},t}(),lt=n(2).query,pt=n(0),dt=n(2).clear,vt=n(0),yt=vt.append,gt=vt.attr,mt=vt.classes,_t=vt.create,bt=vt.remove;function wt(t,e,n){e.insertBefore(t,n||e.firstChild)}var xt={__depends__:[A],__init__:["canvas"],canvas:["type",H],elementRegistry:["type",Z],elementFactory:["type",ct],eventBus:["type",ft],graphicsFactory:["type",function(){function t(t,e){this._eventBus=t,this._elementRegistry=e}return t.prototype._getChildren=function(t){var e,n=this._elementRegistry.getGraphics(t);return t.parent?(e=n.parentNode.childNodes[1])||(e=_t("g"),mt(e).add("djs-children"),yt(n.parentNode,e)):e=n,e},t.prototype._clear=function(t){var e=function(t){return lt(".djs-visual",t)}(t);return dt(e),e},t.prototype._createContainer=function(t,e,n){var r=_t("g");mt(r).add("djs-group"),void 0!==n?wt(r,e,e.childNodes[n]):yt(e,r);var i=_t("g");mt(i).add("djs-element"),mt(i).add("djs-"+t),yt(r,i);var o=_t("g");return mt(o).add("djs-visual"),yt(i,o),i},t.prototype.create=function(t,e,n){var r=this._getChildren(e.parent);return this._createContainer(t,r,n)},t.prototype.updateContainments=function(t){var e=this,n=this._elementRegistry;E(j(t,function(t,e){return e.parent&&(t[e.parent.id]=e.parent),t},{}),function(t){var r=t.children;if(r){var i=e._getChildren(t);E(r.slice().reverse(),function(t){wt(n.getGraphics(t).parentNode,i)})}})},t.prototype.drawShape=function(t,e){return this._eventBus.fire("render.shape",{gfx:t,element:e})},t.prototype.getShapePath=function(t){return this._eventBus.fire("render.getShapePath",t)},t.prototype.drawConnection=function(t,e){return this._eventBus.fire("render.connection",{gfx:t,element:e})},t.prototype.getConnectionPath=function(t){return this._eventBus.fire("render.getConnectionPath",t)},t.prototype.update=function(t,e,n){if(e.parent){var r=this._clear(n);if("shape"===t)this.drawShape(r,e),function(t,e,n){var r=Object(pt.createTransform)();r.setTranslate(e,n),Object(pt.transform)(t,r)}(n,e.x,e.y);else{if("connection"!==t)throw new Error("unknown type: "+t);this.drawConnection(r,e)}e.hidden?gt(n,"display","none"):gt(n,"display","block")}},t.prototype.remove=function(t){var e=this._elementRegistry.getGraphics(t);bt(e.parentNode)},t.$inject=["eventBus","elementRegistry"],t}()]};n.d(e,"default",function(){return jt});var Et=n(7).Injector;function jt(t,e){this.injector=e=e||function(t){return function(t){var e=[],n=[];function r(t){return e.indexOf(t)>=0}t.forEach(function t(i){r(i)||((i.__depends__||[]).forEach(t),r(i)||(function(t){e.push(t)}(i),(i.__init__||[]).forEach(function(t){n.push(t)})))});var i=new Et(e);return n.forEach(function(t){try{i["string"==typeof t?"get":"invoke"](t)}catch(t){throw console.error("Failed to instantiate component"),console.error(t.stack),t}}),i}([{config:["value",t=t||{}]},xt].concat(t.modules||[]))}(t),this.get=e.get,this.invoke=e.invoke,this.get("eventBus").fire("diagram.init")}jt.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},jt.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},function(t,e,n){"use strict";var r=n(3);function i(t,e,n){Object.defineProperty(n,e.name,{enumerable:e.enumerable,value:r.extend(n[e.name]||[],t,e,n)})}function o(t,e){if(!(this instanceof o))return new o(t,e);t.inverse=e,e.inverse=t,this.props={},this.props[t.name]=t,this.props[e.name]=e}o.prototype.bind=function(t,e){if("string"==typeof e){if(!this.props[e])throw new Error("no property <"+e+"> in ref");e=this.props[e]}e.collection?i(this,e,t):function(t,e,n){var r=e.inverse,i=n[e.name];Object.defineProperty(n,e.name,{enumerable:e.enumerable,get:function(){return i},set:function(e){if(e!==i){var o=i;i=null,o&&t.unset(o,r,n),i=e,t.set(i,r,n)}}})}(this,e,t)},o.prototype.ensureRefsCollection=function(t,e){var n=t[e.name];return r.isExtended(n)||i(this,e,t),n},o.prototype.ensureBound=function(t,e){(function(t,e){return Object.prototype.hasOwnProperty.call(t,e.name||e)})(t,e)||this.bind(t,e)},o.prototype.unset=function(t,e,n){t&&(this.ensureBound(t,e),e.collection?this.ensureRefsCollection(t,e).remove(n):t[e.name]=void 0)},o.prototype.set=function(t,e,n){t&&(this.ensureBound(t,e),e.collection?this.ensureRefsCollection(t,e).add(n):t[e.name]=n)},t.exports=o},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";n.r(e),n.d(e,"annotate",function(){return o}),n.d(e,"Module",function(){return f}),n.d(e,"Injector",function(){return p});var r=/^class /;function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(){var t=Array.prototype.slice.call(arguments);1===t.length&&i(t[0])&&(t=t[0]);var e=t.pop();return e.$inject=t,e}var a=/constructor\s*[^(]*\(\s*([^)]*)\)/m,s=/^function\s*[^(]*\(\s*([^)]*)\)/m,c=/\/\*([^*]*)\*\//m;function u(t){if("function"!=typeof t)throw new Error('Cannot annotate "'+t+'". Expected a function!');var e=t.toString().match(function(t){return r.test(t.toString())}(t)?a:s);return e&&e[1]&&e[1].split(",").map(function(t){return(e=t.match(c))?e[1].trim():t.trim()})||[]}function f(){var t=[];this.factory=function(e,n){return t.push([e,"factory",n]),this},this.value=function(e,n){return t.push([e,"value",n]),this},this.type=function(e,n){return t.push([e,"type",n]),this},this.forEach=function(e){t.forEach(e)}}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function l(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function p(t,e){e=e||{get:function(t,e){if(n.push(t),!1===e)return null;throw c('No provider for "'+t+'"!')}};var n=[],r=this._providers=Object.create(e._providers||null),a=this._instances=Object.create(null),s=a.injector=this,c=function(t){var e=n.join(" -> ");return n.length=0,new Error(e?t+" (Resolving: "+e+")":t)},v=function t(i,o){if(!r[i]&&-1!==i.indexOf(".")){for(var s=i.split("."),u=t(s.shift());s.length;)u=u[s.shift()];return u}if(d(a,i))return a[i];if(d(r,i)){if(-1!==n.indexOf(i))throw n.push(i),c("Cannot resolve circular dependency!");return n.push(i),a[i]=r[i][0](r[i][1]),n.pop(),a[i]}return e.get(i,o)},y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof t){if(!i(t))throw new Error('Cannot invoke "'+t+'". Expected a function!');t=o(t.slice())}return{fn:t,dependencies:(t.$inject||u(t)).map(function(t){return d(e,t)?e[t]:v(t)})}},g=function(t){var e=y(t),n=e.dependencies,r=e.fn;return new(Function.prototype.bind.apply(r,[null].concat(l(n))))},m=function(t,e,n){var r=y(t,n),i=r.dependencies,o=r.fn;return o.call.apply(o,[e].concat(l(i)))},_=function(t){return o(function(e){return t.get(e)})},b={factory:m,type:g,value:function(t){return t}};t.forEach(function(t){function e(t,e){return"value"!==t&&i(e)&&(e=o(e.slice())),e}if(t instanceof f)t.forEach(function(t){var n=t[0],i=t[1],o=t[2];r[n]=[b[i],e(i,o),i]});else if("object"===(void 0===t?"undefined":h(t)))if(t.__exports__){var n=Object.keys(t).reduce(function(e,n){return"__"!==n.substring(0,2)&&(e[n]=t[n]),e},Object.create(null)),a=new p((t.__modules__||[]).concat([n]),s),c=o(function(t){return a.get(t)});t.__exports__.forEach(function(t){r[t]=[c,t,"private",a]})}else Object.keys(t).forEach(function(n){if("private"!==t[n][2]){var i=t[n][0],o=t[n][1];r[n]=[b[i],e(i,o),i]}else r[n]=t[n]})}),this.get=v,this.invoke=m,this.instantiate=g,this.createChild=function(t,e){if(e&&e.length){var n,i,o,a,c=Object.create(null),u=Object.create(null),f=[],h=[],l=[];for(var d in r)n=r[d],-1!==e.indexOf(d)&&("private"===n[2]?-1===(i=f.indexOf(n[3]))?(o=n[3].createChild([],e),a=_(o),f.push(n[3]),h.push(o),l.push(a),c[d]=[a,d,"private",o]):c[d]=[l[i],d,"private",h[i]]:c[d]=[n[2],n[1]],u[d]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||e.forEach(function(t){-1!==n[1].$scope.indexOf(t)&&(c[d]=[n[2],n[1]],u[t]=!0)});e.forEach(function(t){if(!u[t])throw new Error('No provider for "'+t+'". Cannot use provider from the parent!')}),t.unshift(c)}return new p(t,s)}}function d(t,e){return Object.hasOwnProperty.call(t,e)}}]);